-- create the CUSTOMER_INVOICE database
CREATE SCHEMA CUSTOMER_INVOICE;
USE CUSTOMER_INVOICE;

-- create
CREATE TABLE CUSTOMER (
    CUST_NUM INT PRIMARY KEY,
    CUST_LNAME VARCHAR(30),
    CUST_FNAME VARCHAR(30),
    CUST_BALANCE DECIMAL(8,2)
);

-- insert
CREATE TABLE INVOICE (
    INV_NUM INT PRIMARY KEY,
    CUST_NUM INT,
    INV_DATE DATE,
    INV_AMOUNT DECIMAL(10,2)
);

-- add key constraint
ALTER TABLE INVOICE 
ADD CONSTRAINT FK_CUST_NUM 
FOREIGN KEY (CUST_NUM) REFERENCES CUSTOMER(CUST_NUM) 
ON DELETE CASCADE 
ON UPDATE CASCADE;

-- insert data into tables
INSERT INTO CUSTOMER (CUST_NUM, CUST_LNAME, CUST_FNAME, CUST_BALANCE) 
VALUES 
(1000, 'Smith', 'Jeanne', 1050.11),
(1001, 'Ortega', 'Juan', 840.92);

INSERT INTO INVOICE (INV_NUM, CUST_NUM, INV_DATE, INV_AMOUNT) 
VALUES 
(8000, 1000, '2016-03-23', 235.89),
(8001, 1001, '2016-03-23', 312.82),
(8002, 1001, '2016-03-30', 528.10),
(8003, 1000, '2016-04-12', 194.78),
(8004, 1000, '2016-04-23', 619.44);

INSERT INTO CUSTOMER (CUST_NUM, CUST_LNAME, CUST_FNAME, CUST_BALANCE) 
VALUES (1002, 'Powers', 'Ruth', 500.00);

ALTER TABLE CUSTOMER ADD CUST_DOB DATE;

UPDATE CUSTOMER 
SET CUST_DOB = '1989-03-15' 
WHERE CUST_NUM = 1000;

DELETE FROM INVOICE 
WHERE
    INV_NUM = 8003;